<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Boost.AFIO</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>

<table cellpadding="2" width="100%">
<tbody>
<tr>
<td valign="top">
<img alt="Boost.AFIO" src="images/ggl-logo-big.png" height="80" width="200">
&nbsp;&nbsp;
</td>
<td valign="top" align="right">
<a href="http://www.boost.org">
<img alt="Boost C++ Libraries" src="images/accepted_by_boost.png" height="80" width="230" border="0">
</a>
</td>
</tr>
</tbody>
</table>
<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>boost</b>      </li>
      <li class="navelem"><b>afio</b>      </li>
      <li class="navelem"><a class="el" href="classboost_1_1afio_1_1future.html">future</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">boost::afio::future&lt; T &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="boost::afio::future" -->
<p>The future status of a scheduled asynchronous operation.  
 <a href="classboost_1_1afio_1_1future.html#details">More...</a></p>

<p><a href="classboost_1_1afio_1_1future-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classboost_1_1afio_1_1future.html#a6ce4c94fcda6dfea2f2267612c0ebaad">future</a> (<a class="el" href="classboost_1_1afio_1_1dispatcher.html">dispatcher</a> *parent, size_t id, shared_future&lt; handle_ptr &gt; <a class="el" href="classboost_1_1afio_1_1handle.html">handle</a>, stl_future&lt; T &gt; result, bool check_handle=true, bool validate=true)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classboost_1_1afio_1_1future.html#afdc049a99fd35e313864b58602a904a6">future</a> (<a class="el" href="classboost_1_1afio_1_1future.html">future</a>&lt; void &gt; &amp;&amp;o, stl_future&lt; T &gt; &amp;&amp;result)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classboost_1_1afio_1_1future.html#a0152654ed66cf321b7a9d60392bac604">valid</a> (bool just_handle=false) const noexcept</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">True if this future is valid.  <a href="#a0152654ed66cf321b7a9d60392bac604"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">T&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classboost_1_1afio_1_1future.html#a81e454507da8e018c20f44ed27664f19">get</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for the future to become ready, returning any value or rethrowing any exception found. Throws a `future_errc::no_state` if this future is invalid.  <a href="#a81e454507da8e018c20f44ed27664f19"></a><br/></td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;class U &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classboost_1_1afio_1_1future.html#a0269afb185f86fccb5bf37fdc13d607a">then</a> (U &amp;&amp;f)-&gt; typename detail</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Schedules a callable to be invoked after this future becomes ready. If this future is null, use the current async file i/o dispatcher.  <a href="#a0269afb185f86fccb5bf37fdc13d607a"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><h3>template&lt;class T&gt;<br/>
class boost::afio::future&lt; T &gt;</h3>

<p>The future status of a scheduled asynchronous operation. </p>
<dl class=""><dt><b>Template Parameters:</b></dt><dd>
  <table class="">
    <tr><td class="paramname">T</td><td>Any returned result. Note this is defaulted to `void` for you, so usually you write `future&lt;&gt;`. As of v1.4 of the AFIO engine, the legacy `async_io_op` struct has been replaced with this custom future type based on the lightweight future-promise factory toolkit in forthcoming Boost.Monad. This custom future type consists of two pieces of future data each with different semantics:</td></tr>
  </table>
  </dd>
</dl>
<p>1. A `handle_ptr` retrieved using `get_handle()`, `operator*` and `operator-&gt;` - this is the shared i/o handle returned by the asynchronous operation. This has non-consuming semantics i.e. you can call `get_handle()` as many times as you like. Note that for legacy compatibility reasons, calling `get_handle()` on an invalid instance returns a null shared pointer instead of an exception throw.</p>
<p>2. If T is non-void, any type `T` - this is any additional data returned by an asynchronous operation above and beyond the i/o handle (e.g. `enumerate()` returns a `std::pair&lt;std::vector&lt;directory_entry&gt;, bool&gt;`. This has *consuming* semantics, so calling `get()` returns the result exactly once.</p>
<p>The reason for the difference in semantics is because it is very common that you need access to an earlier i/o handle in a sequence if some operation returns an error, and besides the shared pointer encapsulation makes non-consumption cost free.</p>
<p>Other than the fact that `get()` returns a `T` and `get_handle()` returns a handle, the errored and excepted state for both is identical and non-consuming for both.</p>
<p>Finally, note that there is a freely available type slice from `future&lt;T&gt;` to `future&lt;void&gt;` which moves/copies only the `future&lt;void&gt;` part of the `future&lt;T&gt;`, leaving the `T` behind. This is because the AFIO engine resides behind a stable ABI layer which cannot know anything about arbitrary types, and therefore it accepts only `future&lt;void&gt;`. Equally, this means you can supply a `future&lt;T&gt;` as a precondition to another op safe in the knowledge that any `T` part will remain untouched for later consumption. </p>

<p>Definition at line <a class="el" href="afio_8hpp_source.html#l01659">1659</a> of file <a class="el" href="afio_8hpp_source.html">afio.hpp</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a6ce4c94fcda6dfea2f2267612c0ebaad"></a><!-- doxytag: member="boost::afio::future::future" ref="a6ce4c94fcda6dfea2f2267612c0ebaad" args="(dispatcher *parent, size_t id, shared_future&lt; handle_ptr &gt; handle, stl_future&lt; T &gt; result, bool check_handle=true, bool validate=true)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classboost_1_1afio_1_1future.html">boost::afio::future</a>&lt; T &gt;::<a class="el" href="classboost_1_1afio_1_1future.html">future</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classboost_1_1afio_1_1dispatcher.html">dispatcher</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">shared_future&lt; handle_ptr &gt;&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">stl_future&lt; T &gt;&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>check_handle</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>validate</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructs an instance. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">parent</td><td>The dispatcher this op belongs to. </td></tr>
    <tr><td class="paramname">id</td><td>The unique non-zero id of this op. </td></tr>
    <tr><td class="paramname">handle</td><td>A shared_future to shared state between all instances of this reference. </td></tr>
    <tr><td class="paramname">result</td><td>A future to any result from the operation. </td></tr>
    <tr><td class="paramname">check_handle</td><td>Whether to have validation additionally check if a handle is not null </td></tr>
    <tr><td class="paramname">validate</td><td>Whether to check the inputs and shared state for valid (and not errored) values </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="afio_8hpp_source.html#l01675">1675</a> of file <a class="el" href="afio_8hpp_source.html">afio.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="afdc049a99fd35e313864b58602a904a6"></a><!-- doxytag: member="boost::afio::future::future" ref="afdc049a99fd35e313864b58602a904a6" args="(future&lt; void &gt; &amp;&amp;o, stl_future&lt; T &gt; &amp;&amp;result)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classboost_1_1afio_1_1future.html">boost::afio::future</a>&lt; T &gt;::<a class="el" href="classboost_1_1afio_1_1future.html">future</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classboost_1_1afio_1_1future.html">future</a>&lt; void &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">stl_future&lt; T &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructs an instance from an existing <a class="el" href="classboost_1_1afio_1_1future_3_01void_01_4.html">future&lt;void&gt;</a> </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">o</td><td>The <a class="el" href="classboost_1_1afio_1_1future_3_01void_01_4.html">future&lt;void&gt;</a> </td></tr>
    <tr><td class="paramname">result</td><td>The future&lt;T&gt; to add </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="afio_8hpp_source.html#l01680">1680</a> of file <a class="el" href="afio_8hpp_source.html">afio.hpp</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a0152654ed66cf321b7a9d60392bac604"></a><!-- doxytag: member="boost::afio::future::valid" ref="a0152654ed66cf321b7a9d60392bac604" args="(bool just_handle=false) const noexcept" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classboost_1_1afio_1_1future.html">boost::afio::future</a>&lt; T &gt;::<a class="el" href="classboost_1_1afio_1_1future.html#a0152654ed66cf321b7a9d60392bac604">valid</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>just_handle</em> = <code>false</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>True if this future is valid. </p>

<p>Definition at line <a class="el" href="afio_8hpp_source.html#l01682">1682</a> of file <a class="el" href="afio_8hpp_source.html">afio.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a81e454507da8e018c20f44ed27664f19"></a><!-- doxytag: member="boost::afio::future::get" ref="a81e454507da8e018c20f44ed27664f19" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">T <a class="el" href="classboost_1_1afio_1_1future.html">boost::afio::future</a>&lt; T &gt;::<a class="el" href="classboost_1_1afio_1_1future.html#a81e454507da8e018c20f44ed27664f19">get</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Waits for the future to become ready, returning any value or rethrowing any exception found. Throws a `future_errc::no_state` if this future is invalid. </p>

<p>Definition at line <a class="el" href="afio_8hpp_source.html#l01684">1684</a> of file <a class="el" href="afio_8hpp_source.html">afio.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0269afb185f86fccb5bf37fdc13d607a"></a><!-- doxytag: member="boost::afio::future::then" ref="a0269afb185f86fccb5bf37fdc13d607a" args="(U &amp;&amp;f)&#45;&gt; typename detail" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T&gt; </div>
<div class="memtemplate">
template&lt;class U &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">auto <a class="el" href="classboost_1_1afio_1_1future.html">boost::afio::future</a>&lt; T &gt;::<a class="el" href="classboost_1_1afio_1_1future.html#a0269afb185f86fccb5bf37fdc13d607a">then</a> </td>
          <td>(</td>
          <td class="paramtype">U &amp;&amp;&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Schedules a callable to be invoked after this future becomes ready. If this future is null, use the current async file i/o dispatcher. </p>

<p>Definition at line <a class="el" href="afio_8hpp_source.html#l01689">1689</a> of file <a class="el" href="afio_8hpp_source.html">afio.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<hr size="1">
<table width="100%">
<tbody>
<tr>
<td align="left"><small>
<p>January, 2014</p>
</small></td>
<td align="right">
<small>
Copyright &copy; 2013-2014 Niall Douglas, Cork, Ireland<br>
Copyright &copy; 2013 Paul Kirth, California<br>
</small>
</td>
</tr>
</tbody>
</table>

<address style="text-align: right;"><small>
Documentation is generated by&nbsp;<a href="http://www.doxygen.org/index.html">Doxygen</a>
</small></address>
</body>
</html>
