#  Boost.AFIO Library test Jamfile
#
#  Copyright (c) 2013 Paul Kirth
#
#  Distributed under the Boost Software License, Version 1.0.
#  (See accompanying file LICENSE_1_0.txt or copy at
#  http://www.boost.org/LICENSE_1_0.txt)


#import modules ;

#local boost-path = [ modules.peek : BOOST_ROOT ] ; #can probably get rid of this

import testing ;

project boost/afio/test
    : requirements
      <threading>multi
      <library>/boost/afio//boost_afio
      <toolset>gcc:<cxxflags>"-std=c++0x -fvisibility-inlines-hidden -fstrict-aliasing -Wstrict-aliasing -Wno-unused -fargument-noalias -fvisibility=hidden -fopenmp"
      <toolset>gcc-mingw:<cxxflags>"-march=i686 -DWIN32 -D_UNICODE -DUNICODE"
      <toolset>gcc:<linkflags>"-lgomp"
      <toolset>clang:<cxxflags>"-std=c++0x -fvisibility-inlines-hidden -fstrict-aliasing -Wstrict-aliasing -Wno-unused -fargument-noalias -fvisibility=hidden -fopenmp"
      <toolset>msvc:<cxxflags>/openmp
      <target-os>linux:<linkflags>"-lpthread"
      <target-os>freebsd:<linkflags>"-lpthread"
      <target-os>windows:<linkflags>"-lws2_32"
      <link>shared:<define>BOOST_AFIO_DYN_LINK=1
      <link>shared:<library>../../system/build//boost_system
      <link>shared:<library>../../filesystem/build//boost_filesystem
      <link>shared:<library>../../atomic/build//boost_atomic
      <link>shared:<library>../../thread/build//boost_thread
    ;


exe boost_afio_test : main.cpp   ../detail/SpookyV2.cpp
    : <include>../../../boost/afio/detail

;

test-suite afio  
    : #[ link main.cpp ../detail/SpookyV2.cpp
      #  : <cxxflags>-std=c++0x <library>/boost/afio//boost_afio <include>../../../boost/afio/detail ]
    
#      [ run main.cpp ../detail/SpookyV2.cpp 
#        : #args
#        : #input files
#        : <cxxflags>-std=c++0x <library>/boost/afio//boost_afio <include>../../../boost/afio/detail ]
    ;




